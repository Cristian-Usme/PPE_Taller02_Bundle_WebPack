(()=>{"use strict";var e,t={989:(e,t,n)=>{const o=(0,n(490).UU)("https://ssfzqmbfgsgnwfpnpcyz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzZnpxbWJmZ3NnbndmcG5wY3l6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NzY5OTYsImV4cCI6MjA3MzQ1Mjk5Nn0.nn89xvrZPvcZ6Gv3XztjhghadMUKnw2n4YJesq9C40c");let r=[],a=[],i=1;const c=document.getElementById("product-list-container"),s=document.getElementById("search-bar"),d=document.getElementById("add-product-form"),l=document.getElementById("logout-button"),u=document.getElementById("list-message"),p=document.getElementById("add-message");document.addEventListener("DOMContentLoaded",async()=>{const{data:{session:e}}=await o.auth.getSession();e?(console.log("‚úÖ Usuario autenticado:",e.user.email),await g()):window.location.href="login.html"});const g=async()=>{u.textContent="Cargando inventario... ü•ñ";const{data:e,error:t}=await o.from("products").select("*").order("created_at",{ascending:!1});if(t)return console.error("Error al cargar los productos:",t),void(u.textContent="‚ùå Error al cargar el inventario.");r=e,a=e,i=1,m(),u.textContent=""},m=()=>{const e=15*(i-1),t=e+15,n=a.slice(e,t);v(n),b()},v=e=>{c.innerHTML="",0!==e.length||0!==a.length?0===e.length&&a.length>0?c.innerHTML="<p>No se encontraron productos en esta p√°gina.</p>":e.forEach(e=>{const t=document.createElement("div");t.className="item-card",t.innerHTML=`\n      <h3>${e.name}</h3>\n      <p><strong>Categor√≠a:</strong> ${e.category||"N/A"}</p>\n      <p><strong>Stock:</strong> ${e.stock}</p>\n      <button class="delete-button" data-id="${e.id}">Eliminar</button>\n    `,c.appendChild(t)}):c.innerHTML="<p>No hay productos en el inventario. ¬°Agrega uno!</p>"},b=()=>{const e=Math.ceil(a.length/15);if(e<=1)return;const t=document.createElement("div");t.className="pagination-container",t.innerHTML=`\n    <div class="pagination-info">\n      P√°gina ${i} de ${e} (${a.length} productos total)\n    </div>\n    <div class="pagination-buttons">\n      <button id="prev-page" ${1===i?"disabled":""}>‚Üê Anterior</button>\n      <span class="page-numbers"></span>\n      <button id="next-page" ${i===e?"disabled":""}>Siguiente ‚Üí</button>\n    </div>\n  `;const n=t.querySelector(".page-numbers"),o=Math.max(1,i-2),r=Math.min(e,i+2);for(let e=o;e<=r;e++){const t=document.createElement("button");t.textContent=e,t.className=e===i?"page-number active":"page-number",t.addEventListener("click",()=>{i=e,m()}),n.appendChild(t)}c.appendChild(t),document.getElementById("prev-page")?.addEventListener("click",()=>{i>1&&(i--,m())}),document.getElementById("next-page")?.addEventListener("click",()=>{i<e&&(i++,m())})};d.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("product-name").value,n=document.getElementById("product-category").value,r=document.getElementById("product-stock").value,{error:a}=await o.from("products").insert([{name:t,category:n,stock:parseInt(r,10)}]);a?(console.error("Error al agregar el producto:",a),p.textContent="‚ùå Error al agregar el producto."):(p.textContent="‚úÖ ¬°Producto agregado con √©xito!",d.reset(),await g(),setTimeout(()=>{p.textContent=""},2e3))}),s.addEventListener("input",e=>{const t=e.target.value.toLowerCase();a=r.filter(e=>e.name.toLowerCase().includes(t)),i=1,m()}),c.addEventListener("click",async e=>{if(e.target&&e.target.classList.contains("delete-button")){const t=e.target.getAttribute("data-id");if(confirm("¬øEst√°s seguro de que quieres eliminar este producto?")){const{error:e}=await o.from("products").delete().eq("id",t);e?(console.error("Error al eliminar:",e),alert("No se pudo eliminar el producto.")):await g()}}}),l.addEventListener("click",async()=>{const{error:e}=await o.auth.signOut();e&&console.error("Error al cerrar sesi√≥n:",e),window.location.href="login.html"})}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,r,a]=e[l],c=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every(e=>o.O[e](n[s]))?n.splice(s--,1):(c=!1,a<i&&(i=a));if(c){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,r,a]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={945:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,c,s]=n,d=0;if(i.some(t=>0!==e[t])){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var l=s(o)}for(t&&t(n);d<i.length;d++)a=i[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(l)},n=self.webpackChunkppe_taller02_bundle_webpack=self.webpackChunkppe_taller02_bundle_webpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var r=o.O(void 0,[96],()=>o(989));r=o.O(r)})();